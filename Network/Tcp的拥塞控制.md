### TCP用来解决什么问题

TCP全称Transport Control Protocol，传输控制协议，重点就是这个**控制**

**控制了什么？**

控制可靠的、按照顺序的以及端与端之间的流量控制[智能的拥塞控制]

**为什么要TCP呢，IP层控制不行吗？**

网络协议就是为了通信，从链路层到IP层就能完成了通讯，但是之所以提出TCP层来实现控制是因为IP层设计的设备太多，一条数据在网络上传输需要经过很多设备，而设备之间需要IP来寻址。如果使用IP层控制需要走的设备就会增加，每一层都需要拆包进行查看，会导致效率和性能大打折扣

**连接到底是什么?**

链接就是双方维护一个状态，通过每一次童心来维护状态的变更

### TCP协议头

![TCP协议头](https://pic2.zhimg.com/80/v2-d9934530c6c334f500cbb92bdefb3b2d_1440w.jpg)

TCP包中只有端口，没有IP。SEQ是为了解决乱序问题的，ACK是确认号，用来解决丢包情况的，告诉对象这个包收到了。标志位TCP flags即标识这个包什么类型的，用来控制TCP的状态，窗口即滑动窗口，用来控制流量的

### 三次握手

**流程图**

![三次握手流程图](https://pic4.zhimg.com/80/v2-245aae771ceef4457f8f2892f4ba8e13_1440w.jpg)

三次握手的目的，首先是为了确保双方的收发都正常，在这三次握手中，确保了客户端的收发以及服务端的收发能力都健康，其次初始化SYN（synchronize sequence number），这个需要是用来保证之后传输数据的顺序性

### 四次挥手

**流程图**

![四次挥手](https://pic1.zhimg.com/80/v2-0edf1401d68dd9dce9006ffe72462a94_1440w.jpg)

四次挥手的目的，因为TCP是全双工协议，也就是说双方都要进行关闭，每一方都向对象发送FIN和ACK，然后通过四次挥手来保证双方的连接都被拆除


### 滑动窗口

滑动窗口就是为了控制流量的，因为我们要根据对方的情况，来控制发送速率，不然发送的内容不能被接受，质量会严重下降。因此对方会告诉发送方还能接受多少数据，然后发送方根绝这个信息进行数据的发送。

**流程图**

![流程图](https://pic2.zhimg.com/80/v2-1e0d716392fb210ae73513fcae106475_1440w.jpg)

但是滑动窗口还是不够，还需要拥塞控制，因为这条链路上通信的渠道有很多，我们还要关注这个链路上的情况，因此需要拥塞控制来进行处理，详细的自己去了解吧